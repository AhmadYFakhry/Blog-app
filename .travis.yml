language: node_js
node_js:
- '12'
dist: trusty
services:
- mongodb
- redis-server
env:
  global:
  - NODE_ENV=ci
  - PORT=3000
  - secure: lSQwkUCJdT8HdNmhOixf7wNOXIv31dCR8aVWG/5KO+MYSvDpPJmXi7hgj+lkq/Na0sWCnuQeVxKKLbYiPVBjmimZNSUrUYIRTmihiq/RRpPBwIm3KbV5xX82YSCuLvL4De53N3FgeP0Eh0xKr/5Ma+m4ylUpQF2H3I5GY0hVcvEMK65e7S027yWNOoDqUdIA/bjU4/A4yFYDH5Gnd8SugTecKsls0xC36cDBKBx1pm/G0lDnskj/QhmzQ0E1vtM6sWbi9t1wVc89zp2ubl4vHtZQRPxLucQyNE0Q/CJGKCrxVqDZqd5t2R36Brtl3AewUhDcdOTzXWkbU0MUpubm4xkBcX+WK+8X0IAkl3nkzYYGr6VszqkGkDLfDy6UkNj08ZDJ1uMdvNfytMtMQokS7lAO72krjbz4R8wX504+KeWKEyXsvBQKnb5WOY0KspqblBO3OOwmF5jFJrKmQAj4HBcaPp9zjoTy+Buoh27nIx32Zx4j9fZkUMoS5uQASRstwbuiWXCofF5jIzClRKNej5M+Kqz7O4o7m+3TPDc9Kl2/wpcUobwuyAaFJx/Vq6+/wVH0pxYVOC/YUX61KSr8nSXF9+dcYJvZbpby1rAp6H2W1ZCqboRC+j+KISbAozAx2cf1dbhFbyC1o15HqfyxDaPs+el/VRFgEDklb5dwrns=
  - secure: Xh60s5hE9deX/iyLwNkzmQoPljd4ZNfTvnPqyzmvlvUtFkZB4KLJkAZph2Vxqb2cBkOPGD/KBYFOhqO/8NECtg5dECguxkQERKv4uZcyZEHHxCvVM5NI9muw1i0yG7g8Z2POragrpdKFfkSDGNlORvDEJLtSzE/4HaAtsxBGGWvBEnLAD2PzL01Ay5kW9qepUo5j6cMMtfUDGyH2Mqm7bmAiv17ALFCi6t2QvgXdgPIWYAnBdsGOaeFW3DTRw6vmvDBWV/1arfqHKBso/7gSdEo7mw1stRsC5p1zbLSI5Nj7lXlLMaHJG/TbKFt9A9eaK3ggn9PbXY2zv9rEFqhl1Hy2jcerhZD66n92Z5QqtLn4sle7wvawSXib2Q2oniCb/CrVOHkYxuhkuMDH1PRj7k5nZOsFLGy/0/zjvaebhYRbTXJme8IRlf/ApJTcmTMMaOKx2To1kIVKIs5JKnIRwqvK1xJxuvqiK4MJJnaTzd+widv7mjD6z9N515nv6kyHDWRdGPibaL4lJ5WeAQZVhJWlwJHHtXHZ+mxdjkijdPHJoZtlA/cEDGC2O1QkKNf+y8gZ3Sd5eM+KB+CczRMRdbdSv6hcmw6z9AbBP91eh/gHIr/zCm0ctqhtHRGnuPtsr8BLp7PpRnZXrY5xLwInMYsoA6Nnm20+TovXYnbaBBk=
  - secure: lLh/v4UY4mdQ1P4PDNtIkkw5qbD5rLLQtVOTOnMw2SozMv+KQFDGIRkn1NgUa+UvFdzwNPpivVrO0Nf0qHIlv7M8F+OTGe94WiUz1iJy0ekf3SWDLGR+B5qrEH7tJVM9Z0hyqvxm7b3O3wc5qz02mDG6nDtOgzdYAk6KDbZkkrmkEpQvbpuvEDKcXtT0UihO1LhDjoDlJMh4539bg2u97HEkaHj4ZUypKa5y/0L+VMelD59xd9f1C9+77AXfRs2Xqhmyx1iYuGOKZ5aWSZNpB9Kee6s4+AGyXi1pkot4fbnQW3gARtkeS7H/Sme6EoUBGdD28MiLbaBJpabNVPVABai4VQyI5aw3MHj/iTdFyDrgqbBM/JRXjF5+EIjn8wCLasd0d6f+g6Tshm8gj/QWoZaYgXrrEA5C0dD+vhs04AkKpDzeSC6KhhhAUgC9yRQ8DziZzCFtGjdvrz4jPf3wVK/XF76Zo4CWH/rlNXiE1yB6c8Ovht5JNZRWfArMOLjONtVlxp67xgj7cWWq3ktjWMI36HlM0BY0MQaqudCiM2B0doYz1irtcXOufmijjN/+ywH/ywJ9+s2fUo7kSrf8G3dh2EUMalrbEQDsM+nYCqXtJ14d+ZK6oATeY6B3AB9zqQJDJB95iQcLeIIKIw3sw7DBsDr0n0llcCxLp2ZGHPM=
  - secure: Rrn08BMRVl91PxCbifmNt1Jsceu5IuVR4eZow8eqjnRHCQeQAS/X/UaagCZ4cnZ4YeXkUI5EZ1pNl+oSpZbyliJIHg6zq9PHt0wM3COf7DVwm2A/wwnyCgTHT3VNu4qOVlBFgF5Sv42227YWKGSe/UOZi4WD5EfvZ8etAe2TzJB7lsrAD32CRoD+qUUGGYVYGKcOacHNI7x2aa9M+7QGGFvUOyggOTmO38Oyx9yoC+BiI7wnoG/+WQw2pzI2MOdVIYNNU+9/vckGMFNn4+HLa3P8WPMW6IiW68dm1fPSmcJGbGN4BRE+ghW2lFm0iaCrC5d33I4xT60bwUCnaWSjqnekJv1oUacnacCRPKFqDFpm+Ha6YcQY5l7y+OfXKfCFFy5Hd4b+z0KE4QVTnMprRYHyzd1IHN4Arhl94DefY1ImnPlUt32zUOiL2bzUCqqH3buxALOxQxQXaKU/kNGpX8sUoouLc9YwJYtQ6QwCAeYDJyGyzhpE4WYvueHAwGi7lryBYHWZOK8/RDxJ6L+Mu/SHDywXu+NOwzl75yq+l4Fm5+W2gcrnYCXl+/lduz2DZD6RQHQIg6BzQg/gJBscwhElHa7m/8M3wBe+u4Xd3FyqKLa8ZiEegAmhttY10+b1ST1cJvw38ZzBj90UQCBRpMhP5E2mvXpD/zkNoiT0XjQ=
  - secure: ON3sWAD88qtqxx0ykGvn/b5m5AEk5gs2PkJTd4Nvjs9SP+jNs75q/CV6rlzT0aHUgbGbZhUZkPyoV1825uEuLsyaG7uBGFSnuBWaKwFoMwMoYttTs5Wa13v5WnrBPQb0bJ8Rk5GW8Fv15zvEW57t3wvd5hVd3GnU4PFYpLUszg/AIpCrLJqZPZjgsVoaa2He95EWKRRXQyhe1SQsXfIozNtKjhdhtcECdHlSr2fhe1Nu8BcFV/7DF/IryLRYiDAXw+bchYiHsvBxNmGvhyn78LhDHjZXO5MiufvvemRMJ11rKfY9edy+m59RS+CK5AwmN430Oh5/CHsp76YhoseLKafRkMBD66rg5Io1PI7F9A5vg0e+rRMMZW/Du10U+CdSMB5fakBe2ARisA3Lyq3VFzdN3RDz29Ecc6lFeqw/yf39e48zobYdbYXrga3wl7apYZexO/pk7HKPnsHOgaFE6k7hHo4yMBUugAW73pAXQoMA/eZyMT+0eJ0PEH6ImZcBjIKyvE8g3uqUQuwyVNQ49LxEskt9Nrj8WT9+Hhr3gaQ0Pm0WNN6Moe+OMYUXh3/y6tJW7dhBjjB1R8YYTgNE4TzfgMzHW2a75PBHS0vjBhAfr22nw4lP/WGbq3FIfdqd6u24ucpiHCsQfrJMe4OPG/Hk1LRGNWD4FBXkJtFhLZ8=
  - secure: kZOqGAPkmCGBcQ9GXNDKaGDp5HFfocxfTZGLVz2krKFFzRAm5oImJbXEnKW6RUyI9S+ORCTYPo1/rBNoPUfqUvVJPVZgMRo6gmrbFvJN0OhIEEhrNB6Ds3YUL2Cb+X5F8MQJMK4nmb/hvRGqcl3qLr5k7+ZAxfMHnUeqwEx7rj01Pn1h/3NI/rM+muJJjX4jK7s0YODEhLWn4JIDfh1C+88fyfbvnkhDG6dOsA8n2dwCxSQxzW97oqjJP4AdJWrakTOjfKWlS7EfXehHvuI0vozmaINp2gPOe9IHeUE+NpvtT37hiEPfWO4HfGr0xbqCDbyfSW/TDdtx87weLdYrfiJJgqbBBjyEY9vYamGaHHV6SN+t0LnErPflWvhXnoEFvjqui2tgjije6g6nCP6tQsrI67iiJjVQZTGnzrHGXqPyQiT60s4rap8x4nud2iYq9inuVQzSUxH+lUUtJqTZKb8D+1fXp1NF4PUnstnUtm+V3449iW1nbcDEHxEIE/eYkvd0p42UYgJpAARawkZckHpCCGpPiL8DkD+VYFXXphP7vb0mb+VOtiivsapmFUPXNqaGPWOgGlrNw67qOVeyvkVZYXj6dJY/pTHmeWGWvHJ68EiDbHLDsIMAIF1teQK9P9G4aTtNYsdfHRIKaQpgUAUteCY5D/3nocby7MUPl+I=
  - secure: VeSP6MinLyXd2f3PeDXdAX/YHkTYmsFhFySqivUKbXVf/mkPqbXvQvKrtEoP2gjF3A4Yd0IU+v6D4vpKVPn4LXgHHPBTy/wZz7ndEZd8jxmXm1yQYOx+Tp/5O49VG3DZ1biTlTvGksuSfiFMsEaojEY+6mcIINdMxfpkMAxBtaf1iryZi0s9gPI8Y9DUHLytDgUANkB/S/QZKW9Mwjowil6YQNkI9k6cAiHR5GJUmpYhbZyB7TKbP0IutuY3cmgsqmT5VDhWNXOFx6VggMHOJD9x93c+6yKBqTVX0wWfVMkdga9gYKjYwyLC3U0HlI38vqhbXqbjMT833wOluMkSWB/aeEMvStarjZsQCdwQWcN8KJyd/WoLM0uwQIKmJHqo1KExVVnyWzhHt0gGzohfNmbgmP9yD73bRKBRvfVJs0Y7h33/uNgAjPLgBlsnuh+4JFlTsbOtbZGyjlZOGKaze/c2oNdfxbBdLif4r7JDgu4EI0vAhO6YoNR4w++cJvOwu0XJy4cbOzr0hvyIjVcmK8oFWLSsVZOXapQws5cGnsPzmjCjr9IuPY7pgHQ4+/ELZNi9FR8US+v1IbrE1poatxm/DShhJTIFtSYtUlSYrY3gY0aMRDSqKSWMJbKkl09NSIz64Kc+HCbULubRetP9bDx6Qb9BsFej/IWB27FKI2g=
  - secure: hxscNi0GrqxWsBgxbqAWBIYhjX+BXNmmYZ5n/MIiZMu5ZEOodbiqfWVQxBA4KcPaMXQSGk+9ADEJTE5z1b5fA1CEqR8dT4TvovuUGet1mWvsUT8KUhjjlM0WYB9QjQvEad+tLg0FdxnNAaEb+aTzU7VCRlJN4xjr5vIfsID1/Mrp8Uhp52OaqcTkRv99daZDVUYs1CAu+aXVzdnNWTUeJKau/9SkI12fT+Gvx6SUjdxBzLk9A4AcpzGx526TfNi9pg9KZMKpsAXQb3OvkCXoqRQgw/uT3o6jIsWuXQweomVlT/FTde9Q5Y9nXJPwpld98FzticWMgDrwHT2IXvq2g7SIUIAefg3kY9QQ2P2SJRionpxSvZXuYoH1CQkIzrU4kiZWx3bMPdDnPkENuCfCSXSI2j5MwVhq60nmtYXkxiqOT2cJNpHubqJjqM4TT9yJ6Ijtc5zpWqS/b3VuaL3f27btkCTs6jOViYGYpDOjFi1i2pFnQtVaALua+80sMuxhuBnBpTTq7+QK2zCeZJyKRKTJhDklmJ4bO2pKYCRThTXxzjO9JoE6VwWYX9pQqlrgu3yXIoxBfsXy3wY3Ot/UaA/WAWkz9USqliec2Sr2+k9jypheUyMTROIEfKmbBoTJaN8DgpznUp4899AiMbAEW0fJgPIW/gfV4zrOIMj/YtI=
  - secure: CCUFWL70Cd5+YpIZPyf0jeMyL8nz8GJsp+GrLvmxtQ9mLnV28v7QDS8+TUnAPwqtWkZRdlaEYaYd1t4Db+wcyAFnHqaRVYntmjN/cBuTp4gVP29dwCdJt8gOcvCroGB2Esf2EpmWaMTcXyzOEWkzxIrCbWLbR16NWUJWGB2FG/wVBnN62Yv8LNo3d8cIXn1+A9x8uunB7RIDJpWwPMwOw7mVVbjpLEmh6WEDydTyMBlQNGaKmSAdy518CJXpAIK3TPmTTPY/MGD70Na6xzrLuUnL8RB34k7GVKP2b+W7ccdxszPNbftAPH/s2j8Srdsafd6RgQ6YhJ5KYjQ0Zp+6S31KVMG5NrB4AUJbRQDvYgCdegnG1poR5TGfH3/u2KtW8ysrowszRCIIuCKP2HKdRBh+4T+9r3pTxVbeUC6Zir2aPcQnIw9pbuN0fREpN3JkYTTH0pNnyzJt0u7NtP1maleQevAhn8PBdH9cdUNx3VmbEoW8taDhc7Ve4O/mgcKey+UZ2lTofubMUh9PltFd16Dzivat/cViJalzdA2Uym7OkgNUcPVID8IU4ZP82GbaHdbvwbI8xhVClg6E2H4yUvFVNKqIuDn9d06xDoRPBnabtY0uj4phmnK/66sJpEr6AMZWS1XCXCj51rVptnKdnOZ9gIRXMAABHgXEv78vmQ0=
  - secure: JVkuLeKe449khSzlMEjVRyxKnsideKE8w9/Ef6RZNPWcpJbxE8v6I8m8xmtRP8d3yIOr3Z7CKYNHzgWovj6zHQ1OfF96JzaCnvwpG9L/JwtzX/ib9JujN7giOyznGVEJk6bNngyn4780/DcyGuGpdkQyZdlirFkpq+PtBjHnyw48C+hem/UaDY13MpMm1oWSVzrXvXm4I8aTD4Z1gRKlutTxyDhpcliYbYNKY4NjR24Q+dp26F1+x/byQgmLWQv/ME9VH8HbtEnTvIfI4cf8arzb93oT8D2kGCJ5+foIncgFO8/0NrUNkMgQ+4Q297BIg6WSYSU4/W33t4PAfHyJoQN3/fmKqnChs82j6bRmzkEQDc4pyePdEio0IRAtsJdKsiyKy7Ojh4kl7t1ODITUVHBzo26nrKaXGeZN+okvN2z8JXuRyTsVmmDh1OoUoBfl2swJ/4VI7OH2M4URXnK1dL/dEhtxjGo8W5fZD/ld/qusjEleI2iW9hEY76sq3BhxJ1f85+bSiXZleNUhwyoz3kCS+cEvgPCSD5EVULXuuWOVftgz+hLRPMuKIPGvc/R0kvd1YWXzzT3m3/3fPXXE1SJQ+fQMqrbdqUQr8v0+fuDstprgfi3O5kCLnazTb816kSWdP+Xpr1zplAaRVWxTlas+3pl0zBsqoT+mB52uFA4=
cache:
  directories:
  - node_modules
  - client/node_modules
install:
- npm install
- npm run build
script:
- nohup npm run start &
- sleep 4
- npm run test
